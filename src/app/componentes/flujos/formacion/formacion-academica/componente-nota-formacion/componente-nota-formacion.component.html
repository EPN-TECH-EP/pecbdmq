<app-boton-volver
  [texto]="'Regresar al menú de academia'"
  [link]="'/principal/formacion/menu-academia'"
></app-boton-volver>

<div class="m-5 p-5" *ngIf="showLoading">

  <div *ngIf="componenteNotasPeriodoAcademicoActivo.length > 0; else formulario">
    <div *ngFor="let nota of componenteNotasPeriodoAcademicoActivo"
         class="d-flex align-items-center gap-2 mb-2">
      <b class="text-primary" [style.width.px]="150">{{nota.nombre}}: </b>
      <b class="text-primary me-3" *ngIf="!estaEditando">
        {{nota.porcentajeComponenteNota}}
      </b>
      <div *ngIf="estaEditando && codComponenteNotaEditando === nota.codComponenteNota">
        {{nota.porcentajeComponenteNota}}
      </div>
      <button
        *ngIf="!estaEditando"
        [style.width.px]="15"
        [style.height.px]="15"
        mdbTooltip="Editar valor"
        class="btn btn-primary btn-floating bg-light text-black text-center"
        mdbRipple
        type="button"
        (click)="onEditarPonderacionNota(nota)"
      >
        <i class="fa fa-edit"></i>
      </button>
      <div
        *ngIf="estaEditando"
        class="d-flex align-items-center gap-2"
      >
        <button
          class="btn btn-sm btn-success me-2"
          type="button"
          *ngIf="estaEditando && codComponenteNotaEditando === nota.codComponenteNota"
        >
          <i class="fas fa-check"></i>
          Confirmar baja
        </button>
        <button
          class="btn btn-sm btn-danger"
          type="button"
          (click)="onCancelarEdicion()"
          *ngIf="estaEditando && codComponenteNotaEditando === nota.codComponenteNota"
        >
          <i class="fas fa-cancel me-1"></i>
          Cancelar
        </button>

      </div>
    </div>
  </div>

  <ng-template #formulario>
    <form [formGroup]="componenteNotaForm">
      <div class="d-flex align-items-center mb-2">
        <b class="text-primary" [style.width.px]="150">ACADEMICA:</b>
        <mdb-form-control [style.width.px]="150">
          <input
            mdbInput
            mdbValidate
            type="number"
            min="0"
            max="1"
            step="0.1"
            class="form-control"
            formControlName="totalAcademico"
          >
          <label mdbLabel class="form-label mb-2x">Ponderación de nota</label>
        </mdb-form-control>
      </div>
      <div class="d-flex align-items-center mb-2">
        <b class="text-primary" [style.width.px]="150">DISCIPLINARIA:</b>
        <mdb-form-control [style.width.px]="150">
          <input
            mdbInput
            mdbValidate
            type="number"
            min="0"
            max="1"
            step="0.1"
            class="form-control"
            formControlName="totalDisciplinario"
          >
          <label mdbLabel class="form-label mb-2x">Ponderación de nota</label>
        </mdb-form-control>
      </div>
      <div [ngClass]="getColorClass()" class="fw-bold mb-2">
        TOTAL: {{ totalPonderacion }}
      </div>
      <div>
        <button
          class="btn btn-success"
          [disabled]="componenteNotaForm.invalid || totalPonderacion !== 1"
          (click)="onGuardarComponenteNota()"
        >
          <i class="fas fa-save me-2"></i>
          Guardar
        </button>
      </div>
    </form>
  </ng-template>

</div>


