<!-- Inicio de la barra de progreso -->
<div class="row justify-content-center">
  <div class="col-md-9">
    <mdb-stepper #stepper [linear]="false">
      <mdb-step  [name]="'Crear Convocatoria'">
          <ng-template mdbStepIcon id="" >
            <i class="fas fa-user"></i>
          </ng-template>


          <div class="container">
            <div class="row">
              <div class="col-md">

                <div [formGroup]="validationForm" (ngSubmit)="onSubmit()">
                  <mdb-form-control>
                    <input mdbValidate mdbInput type="number" id="for" class="form-control mb-5" formControlName="codigo" required/>
                   <label mdbLabel class="form-label mb-2x" for="form1" >
                     Código</label>
                   <mdb-error *ngIf="codigo?.invalid && (codigo?.dirty || codigo?.touched)">
                     <i class="fas fa-exclamation-circle mb-1"></i>
                     Este campo es requerido
                     </mdb-error>
                   <mdb-success *ngIf="codigo?.valid && (codigo?.dirty || codigo?.touched)">
                     <i class="fas fa-check-circle"></i>
                    Campo Correcto </mdb-success>
                   </mdb-form-control>


                  <mdb-form-control>
                   <input mdbValidate mdbInput type="number" id="for" class="form-control mb-5" formControlName="cuposHombres" required/>
                   <label mdbLabel class="form-label mb-3" for="form2">
                    Cupos Hombres</label>
                   <mdb-error *ngIf="  cuposHombres?.invalid && (cuposHombres ?.dirty || cuposHombres?.touched)">
                    <i class="fas fa-exclamation-circle"></i>
                    Este campo es requerido
                    </mdb-error>
                   <mdb-success *ngIf="cuposHombres?.valid && (cuposHombres?.dirty || cuposHombres?.touched)">
                    <i class="fas fa-check-circle"></i>
                    Campo Correcto</mdb-success>
                  </mdb-form-control>


                 <mdb-form-control>
                  <input mdbValidate mdbInput type="number" id="for" class="form-control mb-5" formControlName="cuposMujeres" required/>
                  <label mdbLabel class="form-label mb-2" for="form3">
                  Cupos Mujeres</label>
                    <mdb-error *ngIf="  cuposMujeres?.invalid && (cuposMujeres ?.dirty || cuposMujeres?.touched)">
                    <i class="fas fa-exclamation-circle"></i>
                    Este campo es requerido
                    </mdb-error>
                  <mdb-success *ngIf="cuposMujeres?.valid && (cuposMujeres?.dirty || cuposMujeres?.touched)">
                    <i class="fas fa-check-circle"></i>
                    Campo Correcto</mdb-success>
                  </mdb-form-control>
                    <form
                       enctype="multipart/form-data"
                       #cargaArchivoform="ngForm"
                       novalidate
                       (ngSubmit)="cargarArchivo()"
                     >
                       <label class="form-label" for="customFile">Documento Convocatoria</label>
                       <input
                         type="file"
                         class="form-control"
                         id="customFile"
                         required
                         name="archivo"
                         (change)="onProfileImageChange($event)"
                       />
                       <div *ngIf="fileStatus?.status === 'progress'">
                         {{ fileStatus?.percentage }}%
                         <div class="progress mt-1">
                           <div
                             class="progress-bar progress-bar-striped progress-bar-animated bg-success"
                             role="progressbar"
                             [style.width.%]="fileStatus?.percentage"
                             aria-valuemin="0"
                             aria-valuemax="100"
                             style="height: 20px"
                           >
                             {{ fileStatus?.percentage }}%
                           </div>
                         </div>
                       </div>
                       <input type="submit" value="Cargar" [disabled]="cargaArchivoform.invalid" />
                    </form>

                    <form
                    enctype="multipart/form-data"
                    #cargaArchivoform="ngForm"
                    novalidate
                    (ngSubmit)="cargarArchivo()"
                  >
                    <label class="form-label" for="customFile">Documentos Soporte</label>
                    <input
                      type="file"
                      class="form-control"
                      id="customFile"
                      required
                      name="archivo"
                      (change)="onProfileImageChange($event)"
                    />
                    <div *ngIf="fileStatus?.status === 'progress'">
                      {{ fileStatus?.percentage }}%
                      <div class="progress mt-1">
                        <div
                          class="progress-bar progress-bar-striped progress-bar-animated bg-success"
                          role="progressbar"
                          [style.width.%]="fileStatus?.percentage"
                          aria-valuemin="0"
                          aria-valuemax="100"
                          style="height: 20px"
                        >
                          {{ fileStatus?.percentage }}%
                        </div>
                      </div>
                    </div>
                    <input type="submit" value="Cargar" [disabled]="cargaArchivoform.invalid" />
                 </form>
                </div>
              </div>
                        <div class="col-md">
                             <mdb-form-control>
                              <input
                                mdbInput
                                [mdbDatepicker]="datepicker1"
                                type="text"
                                class="form-control mb-5"
                                id="exampleDatepicker"
                                />
                                <label mdbLabel for="exampleDatepicker1" class="form-label mb-5">Seleccionar Fechan Inicio</label>
                                <mdb-datepicker-toggle [mdbDatepicker]="datepicker1"></mdb-datepicker-toggle>
                                <mdb-datepicker [inline]="true" #datepicker1></mdb-datepicker>
                             </mdb-form-control>

                             <mdb-form-control>
                               <input
                                mdbInput
                                type="text"
                                [mdbDatepicker]="datepicker2"
                                id="exampleDatepicker"
                                class="form-control mb-5"
                                />
                                <label mdbLabel for="exampleDatepicker2" class="form-label mb-2">Seleccionar Fecha Inicio</label>
                                <mdb-datepicker-toggle [mdbDatepicker]="datepicker2"></mdb-datepicker-toggle>
                                <mdb-datepicker [inline]="true" #datepicker2></mdb-datepicker>
                             </mdb-form-control>

                            <mdb-form-control>
                              <input
                              mdbInput
                              type="text"
                              id="form1"
                              class="form-control mb-5"
                              [mdbTimepicker]="timepicker1"
                               />
                              <label mdbLabel class="form-label mb-5" for="form1">Insertar hora de incio</label>
                                 <mdb-timepicker-toggle [mdbTimepickerToggle]="timepicker1"></mdb-timepicker-toggle>
                              <mdb-timepicker #timepicker1 [inline]="true"></mdb-timepicker>
                            </mdb-form-control>

                            <mdb-form-control>
                               <input
                                mdbInput
                               type="text"
                               id="form1"
                               class="form-control mb-5"
                               [mdbTimepicker]="timepicker2"
                               />
                               <label mdbLabel class="form-label mb-2" for="form2">Insertar hora de fin</label>
                               <mdb-timepicker-toggle [mdbTimepickerToggle]="timepicker2"></mdb-timepicker-toggle>
                              <mdb-timepicker #timepicker2 [inline]="true"></mdb-timepicker>
                            </mdb-form-control>
                         </div>
            </div>
          </div>
                          <div class=" d-grid  col-6 mx-auto justify-content-center">
                               <button id="next-step" class="btn btn-primary"  (click)="stepper.next()">
                                 Siguiente
                               </button>
                          </div>
                       </mdb-step>



                    <mdb-step [name]="'Requerimientos'"><!-- SEGUNDA PARTE-->
                          <ng-template mdbStepIcon id="" >
                            <i class="fas fa-envelope"></i>
                          </ng-template>
                           <h3>Lista de Requerimientos </h3>
                              <div class="container">
                                <div class="row">
                                  <div class="col-md">
                                       <div class="row justify-content">
                                         <div class="col-12 ">
                                           <button
                                             MdbRiple
                                             class="btn btn-primary btn-sm ms-3"
                                             id="btnAgregarFila"
                                             [disabled]="editElementIndex !== -1"
                                             (click)="addRow = true">
                                             <i class="fa fa-plus"></i>
                                           </button>
                                          </div>
                                        </div>


                                            <div class="datatable table-editor mt-3">
                                              <form #form="ngForm" >
                                                <table
                                                     class="table table-sm datatable-table"
                                                     id="tblRequisito"
                                                     mdbTable
                                                     mdbTableSort
                                                     #table="mdbTable"
                                                     #sort="mdbTableSort"
                                                     [dataSource]="requisitos"
                                                     [sort]="sort">
                                                      <thead class="datatable-header">
                                                        <!-- <tr align="center">
                                                          <th *ngFor="let header of headers" scope="col" style="font-size: medium">
                                                            <b> {{ header | titlecase }}</b>
                                                          </th>
                                                          <th scope="col" style="font-size: medium"><b>Acciones</b></th>
                                                          </tr> -->
                                                      </thead>
                                                           <tbody class="datatable-body">
                                                               <tr *ngIf="addRow"  scope="row">
                                                               <td>
                                                                 <mdb-form-control>
                                                                   <mdb-select [(ngModel)]="requisito.nombre" id="requisito"
                                                                   name="requisito">
                                                                     <mdb-option *ngFor="let requisito of requisitos" [value]="requisito.codigoRequisito">{{
                                                                       requisito.nombre
                                                                     }} </mdb-option>
                                                                   </mdb-select>
                                                                   <label mdbLabel class="form-label">Requisito</label>
                                                                 </mdb-form-control>
                                                               </td>


                                                               </tr>
                                                          </tbody>
                                                  </table>
                                                </form>
                                            </div>
                                  </div>
                                </div>
                              </div>
                                        <div class="d-md-flex gap-2 d-md-block justify-content-center">
                                          <button id="" class="btn btn-primary "  autocomplete="off" (click)="stepper.previous()">
                                            Anterior
                                          </button>
                                          <button id="next-step" class="btn btn-primary" (click)="stepper.next()">
                                            Siguiente
                                          </button>
                                        </div>
                    </mdb-step>



                      <mdb-step [name]="'Correo Electrónico'"><!--TERCERA PARTE -->
                            <ng-template mdbStepIcon id="" >
                              <i class="fas fa-check fa-lg"></i>
                            </ng-template>
                            <h5>Datos convocatoria:</h5> <!-- Datos convocatoria -->




    <div class="col-md">     <hr class=" hr-blurry" />
                          <mdb-form-control>
                             <label
                                id="nombre"
                               name="nombre"
                               type="text"
                               class="form-label"
                               [(ngModel)]="requisito.nombre"
                               required
                             >Nombre</label>
                          </mdb-form-control>
                        </div>
                                                      <!-- Datos lista Requisitos-->
                           <h5>Datos lista:</h5>
                          <div class="container">
                            <div class="row">
                                  <!-- Columna 1 -->
                              <div class="col-md">
                                  <mdb-form-control>
                                     <label
                                        id="nombre"
                                       name="nombre"
                                       type="text"
                                       class="form-label"
                                       [(ngModel)]="requisito.nombre"
                                       required
                                     >Nombre</label>
                                  </mdb-form-control>
                                </div>

                                 <div class="col-md">
                                  <mdb-form-control>
                                     <label
                                        id="descripción"
                                       name="descripción"
                                       type="text"
                                       class="form-label"
                                       [(ngModel)]="requisito.descripcion"
                                       required
                                     >Descripción</label>
                                   </mdb-form-control>
                                </div>
                            </div>
                          </div>


                             <!-- email -->
                             <hr class=" hr-blurry" />
                             <h5>Confirmación de Correo Electrónico:</h5>
                        <form [formGroup]="validationForm" (ngSubmit)="onSubmit()">
                            <div class="container">
                              <div class="row">
                                <div class="col-md">
                                  <h6>Ingrese una dirección de correo electrónico a la que podamos enviar un mensaje</h6>
                                  <tr>
                                  <mdb-form-control>
                                    <input mdbValidate mdbInput type="text" id="for" class="form-control mb-5" formControlName="email" required/>
                                    <label mdbLabel class="form-label mb-3" for="form3">Correo Electrónico</label>
                                    <mdb-error *ngIf="  email?.invalid && (email ?.dirty || email?.touched)">
                                      <i class="fas fa-exclamation-circle"></i>
                                      Incluye un signo "@" en la dirección de correo electrónico.
                                    </mdb-error>
                                    <mdb-success *ngIf="email?.valid && (email?.dirty || email?.touched)"
                                    >
                                    </mdb-success>
                                  </mdb-form-control></tr>
                                </div>
                              </div>
                            </div>
                            <div class="d-grid gap-2 d-md-flex justify-content-center">
                              <button class="btn btn-primary"  (click)="openPopconfirm($event)" type="button" >CONFIRMAR</button>
                            </div>
                          <div class="d-grid gap-2 d-md-flex justify-content-md">
                            <button id="prev-step" class="btn btn-primary "  autocomplete="off" (click)="stepper.previous()">
                              Anterior
                            </button>
                          </div>
                        </form>
                      </mdb-step>
    </mdb-stepper>
  </div>
</div>



